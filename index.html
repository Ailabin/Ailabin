<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>倍镜灵敏度转换计算器 - 《三角洲行动》</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #0f172a;
            color: #e2e8f0;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid #3b82f6;
            margin-bottom: 20px;
        }
        
        h1 {
            color: #60a5fa;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 1.1rem;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .input-section, .result-section {
            background-color: #1e293b;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            flex: 1;
            min-width: 300px;
        }
        
        .section-title {
            color: #38bdf8;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #334155;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            background-color: #334155;
            border: 1px solid #475569;
            border-radius: 8px;
            color: #f1f5f9;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .range-info {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-top: 5px;
        }
        
        .btn {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .result-box {
            background-color: #0f172a;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            border-left: 4px solid #3b82f6;
        }
        
        .result-title {
            color: #60a5fa;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #22d3ee;
            text-align: center;
            padding: 15px 0;
        }
        
        .result-detail {
            color: #cbd5e1;
            margin-top: 10px;
            font-size: 1rem;
        }
        
        .game-ranges {
            margin-top: 25px;
            background-color: #0f172a;
            border-radius: 8px;
            padding: 20px;
        }
        
        .range-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .range-table th, .range-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #334155;
        }
        
        .range-table th {
            background-color: #1e293b;
            color: #38bdf8;
            font-weight: 600;
        }
        
        .range-table tr:hover {
            background-color: rgba(30, 41, 59, 0.5);
        }
        
        .info-box {
            background-color: rgba(30, 64, 175, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            border-left: 4px solid #3b82f6;
        }
        
        .info-title {
            color: #60a5fa;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .info-list {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .info-list li {
            margin-bottom: 8px;
        }
        
        .highlight {
            color: #22d3ee;
            font-weight: 600;
        }
        
        .examples {
            margin-top: 20px;
            font-size: 0.9rem;
            color: #94a3b8;
        }
        
        .examples span {
            color: #60a5fa;
            cursor: pointer;
            text-decoration: underline;
            margin-right: 15px;
        }
        
        .examples span:hover {
            color: #38bdf8;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #334155;
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .result-value {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>倍镜灵敏度转换计算器</h1>
            <p class="subtitle">《三角洲行动》专用 - 基于您的红点镜基准，计算其他倍镜的灵敏度系数</p>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">1. 设置您的基准红点镜</h2>
                
                <div class="form-group">
                    <label for="redDotMagnification">红点镜视觉倍率 (x)</label>
                    <input type="number" id="redDotMagnification" step="0.05" min="1.0" max="1.5" value="1.50">
                    <div class="range-info">游戏内可校准范围: 1.0x - 1.5x (步进0.05x)</div>
                </div>
                
                <div class="form-group">
                    <label for="redDotSensitivity">红点镜灵敏度系数</label>
                    <input type="number" id="redDotSensitivity" step="0.01" min="0.1" max="5" value="1.00">
                    <div class="range-info">游戏内设置于 "1-2倍" 区间</div>
                </div>
                
                <h2 class="section-title" style="margin-top: 30px;">2. 输入目标倍镜</h2>
                
                <div class="form-group">
                    <label for="targetMagnification">目标倍镜视觉倍率 (x)</label>
                    <input type="number" id="targetMagnification" step="0.05" min="1.05" max="12.5" value="3.50">
                    <div class="range-info">可输入单个倍率 (如 3.5) 或多个倍率用逗号分隔 (如 2.0, 4.0, 6.0)</div>
                </div>
                
                <button class="btn" onclick="calculateSensitivity()">计算灵敏度系数</button>
            </div>
            
            <div class="result-section">
                <h2 class="section-title">计算结果</h2>
                
                <div id="singleResult" class="result-box">
                    <div class="result-title">目标倍镜灵敏度系数</div>
                    <div id="resultValue" class="result-value">等待计算...</div>
                    <div id="resultDetail" class="result-detail">输入参数后点击计算按钮</div>
                </div>
                
                <div id="multipleResults" class="result-box" style="display:none;">
                    <div class="result-title">多个倍镜计算结果</div>
                    <div id="multipleResultsContent"></div>
                </div>
                
                <div class="game-ranges">
                    <div class="result-title">游戏内区间对应关系</div>
                    <table class="range-table">
                        <thead>
                            <tr>
                                <th>视觉倍率范围</th>
                                <th>游戏内设置区间</th>
                                <th>设置位置</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1.0x - 2.00x</td>
                                <td>1-2倍</td>
                                <td>1-2倍精校区间|【例如：VMX无框、白热、火控···】</td>
                            </tr>
                            <tr>
                                <td>2.05 - 3.00x</td>
                                <td>2-3倍</td>
                                <td>2-3倍精校区间</td>
                            </tr>
                            <tr>
                                <td>3.05 - 4.00x</td>
                                <td>3-4倍</td>
                                <td>3-4倍精校区间</td>
                            </tr>
                            <tr>
                                <td>4.05 - 5.00x</td>
                                <td>4-5倍</td>
                                <td>4-5倍精校区间</td>
                            </tr>
                            <tr>
                                <td>5.05 - 6.00x</td>
                                <td>5-6倍</td>
                                <td>5-6倍精校区间</td>
                            </tr>
                            <tr>
                                <td>6.05 - 7.00x</td>
                                <td>6-7倍</td>
                                <td>6-7倍精校区间</td>
                            </tr>
                            <tr>
                                <td>7.05 - 8.00x</td>
                                <td>7-8倍</td>
                                <td>7-8倍精校区间</td>
                            </tr>
                            <tr>
                                <td>8.05 - 12.5x</td>
                                <td>高倍</td>
                                <td>8倍以上区间|【例如：八倍先进热成像往上精校、灵眼6/12、光学8倍往上精校···】</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="info-box">
                    <div class="info-title">使用说明</div>
                    <ul class="info-list">
                        <li><span class="highlight">基准常数 K</span> = 红点镜视觉倍率 × 红点镜灵敏度系数</li>
                        <li><span class="highlight">目标灵敏度系数</span> = K ÷ 目标倍镜视觉倍率</li>
                        <li>计算出的系数需填入目标倍镜对应的游戏设置区间</li>
                        <li>游戏内允许以±0.5x范围校准瞄准镜视觉倍率，步进为0.05x</li>
                        <li>若多个倍镜落入同一游戏区间，需优先保证最常用倍镜的手感一致</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Dyin丶水杯灵敏度转换计算器 | 专为《三角洲行动》设计 | 基于100%显示器匹配原理 (像素级一致)</p>
        </footer>
    </div>

    <script>
        // 设置示例值
        function setExample(values) {
            document.getElementById('targetMagnification').value = values;
        }
        
        // 判断倍率所属的游戏区间
        function getGameRange(magnification) {
            if (magnification >= 1.00 && magnification <= 2.00) return "1-2倍";
            if (magnification >= 2.05 && magnification <= 3.00) return "2-3倍";
            if (magnification >= 3.05 && magnification <= 4.00) return "3-4倍";
            if (magnification >= 4.05 && magnification <= 5.00) return "4-5倍";
            if (magnification >= 5.05 && magnification <= 6.00) return "5-6倍";
            if (magnification >= 6.05 && magnification <= 7.00) return "6-7倍";
            if (magnification >= 7.05 && magnification <= 8.00) return "7-8倍";
            if (magnification >= 8.05) return "高倍";
            
            // 对于边界情况，默认取较低的区间
            if (magnification <= 2.05) return "1-2倍";
            if (magnification <= 3.05) return "2-3倍";
            if (magnification <= 4.05) return "3-4倍";
            if (magnification <= 5.05) return "4-5倍";
            if (magnification <= 6.05) return "5-6倍";
            if (magnification <= 7.05) return "6-7倍";
            if (magnification <= 8.05) return "7-8倍";
            return "高倍";
        }
        
        // 获取区间建议的校准倍率（使倍率明确落入区间内）
        function getCalibrationSuggestion(magnification) {
            const range = getGameRange(magnification);
            
            // 如果倍率已经在区间内，无需校准
            // 否则建议校准到区间内最近的可校准值（步进0.05）
            if (range === "1-2倍" && magnification >= 1.00 && magnification <= 2.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "2-3倍" && magnification >= 2.05 && magnification <= 3.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "3-4倍" && magnification >= 3.05 && magnification <= 4.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "4-5倍" && magnification >= 4.05 && magnification <= 5.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "5-6倍" && magnification >= 5.05 && magnification <= 6.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "6-7倍" && magnification >= 6.05 && magnification <= 7.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "7-8倍" && magnification >= 7.05 && magnification <= 8.00) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            } else if (range === "高倍" && magnification >= 8.05) {
                return "↑已为您输出正确的倍率值，请填入相应的区间内";
            }
            
            // 否则建议校准到区间内
            let suggested;
            if (range === "1-2倍") suggested = Math.max(1.05, Math.min(2.00, Math.round(magnification * 20) / 20));
            else if (range === "2-3倍") suggested = Math.max(2.05, Math.min(3.00, Math.round(magnification * 20) / 20));
            else if (range === "3-4倍") suggested = Math.max(3.05, Math.min(4.00, Math.round(magnification * 20) / 20));
            else if (range === "4-5倍") suggested = Math.max(4.05, Math.min(5.00, Math.round(magnification * 20) / 20));
            else if (range === "5-6倍") suggested = Math.max(5.05, Math.min(6.00, Math.round(magnification * 20) / 20));
            else if (range === "6-7倍") suggested = Math.max(6.05, Math.min(7.00, Math.round(magnification * 20) / 20));
            else if (range === "7-8倍") suggested = Math.max(7.05, Math.min(8.00, Math.round(magnification * 20) / 20));
            else suggested = Math.max(8.05, Math.round(magnification * 20) / 20);
            
            return `请输入正确的精校后的值以校准至 ${suggested.toFixed(2)}x 以确保明确落入"${range}"区间`;
        }
        
        // 计算灵敏度系数
        function calculateSensitivity() {
            // 获取输入值
            const redDotMag = parseFloat(document.getElementById('redDotMagnification').value);
            const redDotSens = parseFloat(document.getElementById('redDotSensitivity').value);
            const targetInput = document.getElementById('targetMagnification').value.trim();
            
            // 验证输入
            if (isNaN(redDotMag) || redDotMag < 1.0 || redDotMag > 1.5) {
                alert("红点镜视觉倍率必须在1.0-1.5之间");
                return;
            }
            
            if (isNaN(redDotSens) || redDotSens <= 0) {
                alert("红点镜灵敏度系数必须大于0");
                return;
            }
            
            // 计算基准常数
            const K = redDotMag * redDotSens;
            
            // 处理目标倍率输入（可能是单个或多个）
            const targetValues = targetInput.split(',').map(v => v.trim()).filter(v => v !== '');
            const targetMagnifications = [];
            
            for (let val of targetValues) {
                const numVal = parseFloat(val);
                if (!isNaN(numVal) && numVal >= 2.00 && numVal <= 12.5) {
                    targetMagnifications.push(numVal);
                }
            }
            
            if (targetMagnifications.length === 0) {
                alert("请输入有效的目标倍率（2.00-12.5之间）");
                return;
            }
            
            // 单个倍率情况
            if (targetMagnifications.length === 1) {
                const targetMag = targetMagnifications[0];
                const sensitivity = K / targetMag;
                const range = getGameRange(targetMag);
                const calibrationSuggestion = getCalibrationSuggestion(targetMag);
                
                document.getElementById('singleResult').style.display = 'block';
                document.getElementById('multipleResults').style.display = 'none';
                
                document.getElementById('resultValue').textContent = sensitivity.toFixed(4);
                document.getElementById('resultDetail').innerHTML = `
                    <strong>目标倍率:</strong> ${targetMag.toFixed(2)}x<br>
                    <strong>游戏内设置区间:</strong> ${range}<br>
                    <strong>基准常数 K:</strong> ${K.toFixed(4)} (${redDotMag.toFixed(2)} × ${redDotSens.toFixed(2)})<br>
                    <strong>警告:</strong> ${calibrationSuggestion}
                `;
            } 
            // 多个倍率情况
            else {
                document.getElementById('singleResult').style.display = 'none';
                document.getElementById('multipleResults').style.display = 'block';
                
                let resultsHTML = `
                    <div class="result-detail"><strong>基准常数 K:</strong> ${K.toFixed(4)} (${redDotMag.toFixed(2)} × ${redDotSens.toFixed(2)})</div>
                    <table class="range-table" style="margin-top: 15px;">
                        <thead>
                            <tr>
                                <th>目标倍率</th>
                                <th>灵敏度系数</th>
                                <th>游戏区间</th>
                                <th>警告</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                for (let targetMag of targetMagnifications) {
                    const sensitivity = K / targetMag;
                    const range = getGameRange(targetMag);
                    const calibrationSuggestion = getCalibrationSuggestion(targetMag);
                    
                    resultsHTML += `
                        <tr>
                            <td>${targetMag.toFixed(2)}x</td>
                            <td><span class="highlight">${sensitivity.toFixed(4)}</span></td>
                            <td>${range}</td>
                            <td style="font-size: 0.9em;">${calibrationSuggestion}</td>
                        </tr>
                    `;
                }
                
                resultsHTML += `
                        </tbody>
                    </table>
                    <div class="result-detail" style="margin-top: 15px;">
                        <strong>设置说明:</strong> 将计算出的灵敏度系数填入对应游戏区间。如果多个倍镜落入同一区间，优先保证最常用倍镜的手感一致。
                    </div>
                `;
                
                document.getElementById('multipleResultsContent').innerHTML = resultsHTML;
            }
        }
        
        // 页面加载时计算示例
        window.onload = function() {
            calculateSensitivity();
        };
    </script>
</body>
</html>
